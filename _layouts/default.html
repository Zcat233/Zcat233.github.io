<!DOCTYPE html>
<html lang="en">

{% include head.html %}

<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    {% include nav.html %}
    {% include search.html %}

    {{ content }}

    {% include footer.html %}


<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

<script>
document.addEventListener('DOMContentLoaded', function(){
  // 1. 处理 ![数字](url) 图片
  document.querySelectorAll('img').forEach(function(img){
    var alt = img.getAttribute('alt');
    var match = alt && alt.trim().match(/^(\d+)$/);
    if(match){
      img.style.width = match[1] + "px";
      img.style.display = "block";
    }
  });
  // 2. 处理 [数字](url) a 标签
  document.querySelectorAll('a').forEach(function(link){
    var txt = link.textContent.trim();
    var href = link.getAttribute('href');
    if(/^\d+$/.test(txt) && /\.(jpg|jpeg|png|gif|webp|svg)$/i.test(href)){
      var img = document.createElement('img');
      img.src = href;
      img.style.width = txt + "px";
      img.alt = "";
      img.style.display = "block";
      link.parentNode.replaceChild(img, link);
    }
  });
});
</script>

</body>

</html>
